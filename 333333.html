<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jqeruy UI 拖拽练习-事件</title>
    <!--导入jquery插件-->
    <script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.js"></script>
    <!--导入jqueryUI插件-->
    <script type="text/javascript" src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"/>
    <style type="text/css">
        #contanier{
            position: relative;
            width: 400px;
            height: 400px;
            border: 1px solid #ccc;
            display: inline-block;
            /*margin: 100px 0 0 300px;*/
            top: 100px;
            left: 200px;
        }
        .a{
            position: absolute;
            width: 100px;
            height: 100px;
            background-color: red;
            left: 20px;
            top: 0px;
        }
        .b{
            position: absolute;
            width: 120px;
            height: 50px;
            background-color: gold;
            left: 20px;
            top: 240px;
        }
        .c{
            position: absolute;
            width: 140px;
            height: 100px;
            background-color: aqua;
            left: 200px;
            top: 170px;
        }
        .d{
            position: absolute;
            width: 140px;
            height: 90px;
            background-color: #ff5f86;
            left: 260px;
            top: 310px;
        }
    </style>
</head>

<body>
<div id="contanier">
    <div class="block a"></div>
    <div class="block b"></div>
    <div class="block c"></div>
    <div class="block d"></div>
</div>
<script>
    $(function() {
        var wrapO = {id:"contanier"},
            wrapElem = null,
            rateArr = [],
            elemArr = [];

        $("#contanier").resizable({
            handles: "n, e, s, w,nw,ew,sw,ne,es,ns",
            start:function(event,ui){
                getOriginData(wrapO);
            } ,
            resize: function( event, ui ) {
                updateDate(wrapO);
            },
            stop:function( event, ui ){
//                rateArr = [];
                elemArr = [];
            }
        });
        function getOriginData(wrapObj){
            var wrapObjs = $("#"+wrapObj.id);
            var oEleArr = $("#"+wrapObj.id+" .block");
            wrapElem = {
                "id" : wrapObj.id,
                "width":parseFloat(wrapObjs.css("width")),
                "height":parseFloat(wrapObjs.css("height"))
            };
            $.each(oEleArr,function(index,elem){
                rateArr.push({
                    "rateW":parseFloat($(elem).css("width"))/wrapElem.width,
                    "rateH":parseFloat($(elem).css("height"))/wrapElem.height,
                    "rateL":parseFloat($(elem).css("left"))/wrapElem.width,
                    "rateT":parseFloat($(elem).css("top"))/wrapElem.height
                })
            })
        }

        function updateDate(wrapObj){
            var wrapObjs = $("#"+wrapObj.id);
            var oEleArr = $("#"+wrapObj.id+" .block");
            elemArr = [];
            wrapElem = {
                "id" : wrapObj.id,
                "width":parseFloat(wrapObjs.css("width")),
                "height":parseFloat(wrapObjs.css("height"))
            };
            $.each(oEleArr,function(index,elem){
                elemArr.push({
                    "width":wrapElem.width * rateArr[index].rateW +"px",
                    "height":wrapElem.height * rateArr[index].rateH +"px",
                    "left":wrapElem.width * rateArr[index].rateL +"px",
                    "top":wrapElem.height * rateArr[index].rateT +"px"
                });
                $(elem).css({
                    width:elemArr[index].width,
                    height:elemArr[index].height,
                    left:elemArr[index].left,
                    top:elemArr[index].top
                })
            })
        }


    })
</script>
</body>